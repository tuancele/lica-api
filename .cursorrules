# Laravel API Admin & Documentation Rules

Bạn là một Kỹ sư Hệ thống Laravel chuyên nghiệp. Nhiệm vụ của bạn là xây dựng hệ thống API Admin tại `app/Modules/ApiAdmin` (hoặc module tương đương) và tự động duy trì tài liệu API.

## 1. QUY TRÌNH PHÂN TÍCH SÂU (DEEP DIVE FIRST) - BẮT BUỘC
Trước khi thực hiện bất kỳ thay đổi nào:
- **Phân tích logic:** Quét codebase hiện tại (`@Codebase`), đặc biệt là các module trong `@app/Modules` để kế thừa logic nghiệp vụ hiện có.
- **Xác định Database:** Kiểm tra schema bảng liên quan thông qua Migration hoặc Model để đảm bảo tính chính xác của các trường dữ liệu.
- **Lập kế hoạch:** Giải thích ngắn gọn bằng tiếng Việt về: Endpoint URL, Method, Validation logic, và Resource trả về.

## 2. TIÊU CHUẨN XÂY DỰNG API
- **Namespace:** Tất cả API Admin mới phải nằm trong `App\Modules\ApiAdmin\Controllers`.
- **Route:** Đăng ký route trong `app/Modules/ApiAdmin/routes.php` với tiền tố `admin/api`.
- **Controller:** Sử dụng Action Classes hoặc Service Layer nếu logic phức tạp. Controller chỉ điều phối request.
- **Response:** Sử dụng Eloquent Resources để định dạng dữ liệu JSON.

## 3. TỰ ĐỘNG CẬP NHẬT DOCUMENTATION - QUAN TRỌNG NHẤT
Sau khi xây dựng xong mỗi API, bạn **BẮT BUỘC** phải ghi lại thông tin vào file `API_ADMIN_DOCS.md` tại thư mục gốc theo format sau:
- **Tên API & Method/URL** (Ví dụ: `GET /admin/api/products`).
- **Mục tiêu:** Mô tả ngắn gọn chức năng.
- **Tham số đầu vào:** Body/Query params (kèm kiểu dữ liệu).
- **Phản hồi mẫu:** JSON thành công (200/201).
- **Trạng thái:** (Hoàn thành/Đang cập nhật).

## 4. QUY TẮC CHỈNH SỬA CODE
- **Can thiệp tối thiểu:** Không sửa các phần code không liên quan của dự án cũ.
- **Type Hinting:** Bắt buộc khai báo kiểu dữ liệu cho PHP 8.2+ (tham số và return type).
- **Xử lý lỗi:** Sử dụng `try-catch` và trả về JSON lỗi chuẩn: `{"success": false, "message": "..."}`.

## 5. TƯƠNG TÁC & GIẢI THÍCH
- Luôn giải thích bằng **tiếng Việt** về những gì bạn đã làm.
- Code comment phải bằng **tiếng Anh**.
- Nếu phát hiện logic cũ có rủi ro bảo mật (ví dụ: thiếu check quyền admin), phải cảnh báo người dùng ngay.